<Window x:Class="WpfTestApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfTestApp"
        mc:Ignorable="d"
        Title="MainWindow" Height="577.937" Width="690.738" Loaded="Window_Loaded">
    <Window.DataContext>
        <local:PeopleViewModel x:Name="viewModel" />
    </Window.DataContext>
    <Grid Margin="0,0,2,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="432*"/>
            <RowDefinition Height="115*"/>
        </Grid.RowDefinitions>
        <ListBox x:Name="listBox" Margin="37,47,0,0" ItemsSource="{Binding PeopleList}" TabIndex="4" DisplayMemberPath="Name" SelectedItem="{Binding SelectedPerson}" HorizontalAlignment="Left" Width="135" Height="232" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock" HorizontalAlignment="Left" Margin="224,51,0,0" TextWrapping="Wrap" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5" Height="48" Width="163">
            <TextBlock.Effect>
                <DropShadowEffect/>
            </TextBlock.Effect>
            <TextBlock.Text>
                <MultiBinding StringFormat="Name: {0} - Job {1}: Selected {2}">
                    <Binding Path="SelectedPerson.Name"></Binding>
                    <Binding Path="SelectedPerson.Occupation"></Binding>
                    <Binding Path="SelectedPerson.Hobbard"></Binding>
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
        <Button x:Name="AddPersonButton" Content="Add Person" HorizontalAlignment="Left" Margin="37,279,0,0" VerticalAlignment="Top" Width="135" RenderTransformOrigin="0.5,0.5" Command="{Binding AddPersonCommand, Mode=OneWay}"/>
        <Button x:Name="RemovePersonButton" Content="Remove Person" HorizontalAlignment="Left" Margin="37,304,0,0" VerticalAlignment="Top" Width="135" RenderTransformOrigin="0.5,0.5" Command="{Binding RemovePersonCommand, Mode=OneWay}" CommandParameter="{Binding SelectedPerson}"/>
        <ComboBox x:Name="comboBoxRaw" SelectedItem="{Binding SelectedPerson}" HorizontalAlignment="Left" Height="37" Margin="240,104,0,0" VerticalAlignment="Top" Width="163" ItemsSource="{Binding PeopleList}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock>
                        <TextBlock.Text>
                            <MultiBinding StringFormat="Sabbiee: {0} {1}">
                                <Binding Path="Name" />
                                <Binding Path="Occupation" />
                            </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
        <ComboBox x:Name="comboBoxTickBox" SelectedItem="{Binding SelectedPerson}" HorizontalAlignment="Left" Height="37" Margin="240,146,0,0" VerticalAlignment="Top" Width="163" ItemsSource="{Binding PeopleList}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock>
                        <TextBlock.Text>
                            <MultiBinding StringFormat="S: {0} {1} {2}">
                                <Binding Path="Name" />
                                <Binding Path="Occupation" />
                                <Binding Path="Hobbard.Expense" />
                            </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox>
        <Expander x:Name="expander" HorizontalAlignment="Left" Margin="211,201,0,0" VerticalAlignment="Top" IsExpanded="True" Width="176">
            <Expander.Header>
                <TextBlock Text="{Binding SelectedPeople.Count, StringFormat='{}{0} People selected'}"/>
            </Expander.Header>

            <!--
            <ListBox x:Name="listBox1" Height="100" SelectionMode="Multiple" ItemsSource="{Binding PeopleList}" Margin="0,0,-2,0" DisplayMemberPath="Name" ItemStringFormat="{}{0} yr"/>
-->

            <ListBox x:Name="listBox2" Height="100" SelectionMode="Multiple" ItemsSource="{Binding PeopleList}" DisplayMemberPath="Name" local:ListBoxHelper.SelectedItems="{Binding SelectedPeople}" Margin="0,0,-2,0" TextSearch.TextPath="Name">
            </ListBox>

        </Expander>
        <ListBox x:Name="listBox1" HorizontalAlignment="Left" Height="100" Margin="427,10,0,0" VerticalAlignment="Top" Width="100" ItemsSource="{Binding SelectedPeople}" DisplayMemberPath="Name"/>
        <Expander x:Name="expander_Copy" HorizontalAlignment="Left" Margin="427,277,0,0" VerticalAlignment="Top" IsExpanded="True" Width="176">
            <Expander.Header>
                <TextBlock Text="{Binding SelectedPeople.Count, StringFormat=\{0\} People selected}"/>
            </Expander.Header>

            <!--
            <ListBox x:Name="listBox1" Height="100" SelectionMode="Multiple" ItemsSource="{Binding PeopleList}" Margin="0,0,-2,0" DisplayMemberPath="Name" ItemStringFormat="{}{0} yr"/>
-->

            <ListBox x:Name="listBox3" Height="100" SelectionMode="Multiple" local:ListBoxHelper.SelectedItems="{Binding SelectedPeople}" ItemsSource="{Binding PeopleList}" Margin="0,0,-2,0" TextSearch.TextPath="Name" >
                <ListBox.Resources>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                    </Style>
                </ListBox.Resources>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <CheckBox local:CheckBoxHelper.CheckedItem=""  Content="{Binding Name}" IsChecked="{Binding IsSelected}" Checked="CheckBox_Checked"></CheckBox>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

        </Expander>
        <ListBox x:Name="listBox1_Copy" HorizontalAlignment="Left" Height="100" Margin="553,10,0,0" VerticalAlignment="Top" Width="100" ItemsSource="{Binding CheckSelectedPeople}" DisplayMemberPath="Name" />
        <Button x:Name="FilterSelected" Content="Filter Selected" HorizontalAlignment="Left" Margin="455,405,0,0" VerticalAlignment="Top" Width="135" RenderTransformOrigin="0.5,0.5" Command="{Binding FilterPeopleCommand, Mode=OneWay}"/>
        <ListBox x:Name="listBox1_Copy1" HorizontalAlignment="Left" Height="100" Margin="427,136,0,0" VerticalAlignment="Top" Width="100" ItemsSource="{Binding filteredPeopleView}" DisplayMemberPath="Name" />
        <TextBlock x:Name="textBlock1" HorizontalAlignment="Left" Margin="271,234,0,0" TextWrapping="Wrap" Text="{Binding SelectedPerson.Hobbard.Expense}" VerticalAlignment="Top"/>
        <DataGrid x:Name="dataGrid" HorizontalAlignment="Left" Margin="553,186,0,0" VerticalAlignment="Top" Height="64" Width="74"/>
        <Expander x:Name="expander_Copy1" HorizontalAlignment="Left" Margin="164,377,0,0" VerticalAlignment="Top" IsExpanded="True" Width="176" Grid.RowSpan="2">
            <Expander.Header>
                     <StackPanel Orientation="Horizontal" Width="Auto">
                        <TextBox Width="149" Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
            </Expander.Header>
            <!--
            <ListBox x:Name="listBox1" Height="100" SelectionMode="Multiple" ItemsSource="{Binding PeopleList}" Margin="0,0,-2,0" DisplayMemberPath="Name" ItemStringFormat="{}{0} yr"/>
-->

            <ListBox x:Name="listBox4" Height="100" SelectionMode="Multiple" local:ListBoxHelper.SelectedItems="{Binding SelectedPeople}" ItemsSource="{Binding TextFilteredPeopleView}" Margin="0,0,-2,0" TextSearch.TextPath="Name" >
                <ListBox.Resources>
                    <Style TargetType="{x:Type ListBoxItem}">
                        <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                    </Style>
                </ListBox.Resources>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <CheckBox Content="{Binding Name}" IsChecked="{Binding IsSelected}" Checked="CheckBox_Checked"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

        </Expander>
        <TextBox x:Name="textBox" HorizontalAlignment="Left" Height="23" Margin="455,34,0,0" Grid.Row="1" TextWrapping="Wrap" Text="{Binding FilterPeopleCommand.Execution.Result, Mode=OneWay}" VerticalAlignment="Top" Width="172"/>
        <Button x:Name="FilterSelected_Copy" Content="Cancel" HorizontalAlignment="Left" Margin="455,0,0,0" VerticalAlignment="Top" Width="135" RenderTransformOrigin="0.5,0.5" Command="{Binding FilterPeopleCommand.CancelCommand, Mode=OneWay}" Grid.Row="1"/>
    </Grid>
</Window>
